!function(){"use strict";class e{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._element=t,this._inputList=[...this._element.querySelectorAll(this._inputSelector)],this._buttonElement=this._element.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._element.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._element.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=" "}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._element.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=t}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._closeModalOnRemoteClick)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._closeModalOnRemoteClick)}_handleEscClose=e=>{e.preventDefault(),"Escape"===e.key&&this.close()};_closeModalOnRemoteClick=e=>{e.target.classList.contains("modal")&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=s}_getInputValues(){return this._inputData={},this._inputList.forEach((e=>{this._inputData[e.name]=e.value})),this._inputData}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}close(){this._popupForm.reset(),super.close()}}const n={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},i=document.querySelector("#profile-edit-modal"),o=document.querySelector("#profile-modal-form"),r=document.querySelector("#add-card-modal"),l=document.querySelector("#add-card-form"),a=document.querySelector("#preview-image-modal"),c=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__add-button"),u=new class{constructor(e){let{userNameSelector:t,userJobSelector:s}=e;this._userNameElement=document.querySelector(t),this._userJobElement=document.querySelector(s)}getUserInfo(){return{name:this._userNameElement.textContent,job:this._userJobElement.textContent}}setUserInfo(e){this._userNameElement.textContent=e.name,this._userJobElement.textContent=e.job}}({userNameSelector:".profile__title",userJobSelector:".profile__description"}),_=new s({popupSelector:i,handleFormSubmit:e=>{u.setUserInfo(e)}}),m=new class extends t{constructor(e){super({popupSelector:e}),this._imageModal=this._popupElement.querySelector(".modal__image"),this._imageModalName=this._popupElement.querySelector(".modal__image-name")}open(e){let{name:t,link:s}=e;this._imageModal.src=s,this._imageModal.alt=t,this._imageModalName.textContent=t,super.open()}}(a);function h(e){return new class{constructor(e,t){let{cardData:s,handleImageClick:n}=e;this._name=s.name,this._link=s.link,this._handleImageClick=n,this._cardSelector=document.querySelector(t)}_getTemplate(){return this._cardSelector.content.querySelector(".card__element").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeIcon),this._deleteButton.addEventListener("click",this._handleDeleteCard),this._cardImage.addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link})))}_handleLikeIcon=()=>{this._likeButton.classList.toggle("card__like-button_active")};_handleDeleteCard=()=>{this._element.remove(),this._element=null};generateCard(){this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._setEventListeners();const e=this._element.querySelector(".card__name");return this._cardImage.src=this._link,this._cardImage.alt=this._name,e.textContent=this._name,this._element}}({cardData:e,handleImageClick:()=>{m.open(e)}},"#card-template").generateCard()}const p=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=h(e);p.addItem(t)}},".gallery__cards"),E=new s({popupSelector:r,handleFormSubmit:e=>{const t=h(e);p.addItem(t)}});_.setEventListeners(),m.setEventListeners(),E.setEventListeners(),p.renderItems();const S=new e(n,o),v=new e(n,l);S.enableValidation(),v.enableValidation(),c.addEventListener("click",(()=>{const e=u.getUserInfo();_.setInputValues(e),S.resetValidation(),_.open()})),d.addEventListener("click",(()=>{v.resetValidation(),E.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhN0UsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBcIm1vdXNlZG93blwiLFxyXG4gICAgICB0aGlzLl9jbG9zZU1vZGFsT25SZW1vdGVDbGlja1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwibW91c2Vkb3duXCIsXHJcbiAgICAgIHRoaXMuX2Nsb3NlTW9kYWxPblJlbW90ZUNsaWNrXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2Nsb3NlTW9kYWxPblJlbW90ZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dERhdGEgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faW5wdXREYXRhW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RGF0YTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSBkYXRhW2lucHV0RWxlbWVudC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1Db25maWd1cmF0aW9uID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1tb2RhbC1mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBcIi5wcm9maWxlX190aXRsZVwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdhbGxlcnlDYXJkcyA9IFwiLmdhbGxlcnlfX2NhcmRzXCI7XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBmb3JtQ29uZmlndXJhdGlvbixcclxuICBjYXJkU2VsZWN0b3IsXHJcbiAgcHJvZmlsZUVkaXRNb2RhbCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlSm9iLFxyXG4gIHByb2ZpbGVGb3JtLFxyXG4gIGFkZENhcmRNb2RhbCxcclxuICBhZGRDYXJkRm9ybSxcclxuICBwcmV2aWV3SW1hZ2VNb2RhbCxcclxuICBnYWxsZXJ5Q2FyZHMsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHVzZXJOYW1lU2VsZWN0b3I6IHByb2ZpbGVOYW1lLFxyXG4gIHVzZXJKb2JTZWxlY3RvcjogcHJvZmlsZUpvYixcclxufSk7XHJcblxyXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHByb2ZpbGVFZGl0TW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocHJldmlld0ltYWdlTW9kYWwpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgY2FyZERhdGE6IGRhdGEsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBpbWFnZVByZXZpZXdQb3B1cC5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG5cclxuICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBnYWxsZXJ5Q2FyZHNcclxuKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBhZGRDYXJkTW9kYWwsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG5cclxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZCk7XHJcbiAgfSxcclxufSk7XHJcblxyXG51c2VySW5mb1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZ3VyYXRpb24sIHByb2ZpbGVGb3JtKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlndXJhdGlvbiwgYWRkQ2FyZEZvcm0pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VyaW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgdXNlckluZm9Qb3B1cC5zZXRJbnB1dFZhbHVlcyhjdXJyZW50VXNlcmluZm8pO1xyXG5cclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICB1c2VySW5mb1BvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VySW5mbykge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcclxuICAgIHRoaXMuX3VzZXJKb2JFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckluZm8uam9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX2ltYWdlTW9kYWwgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9pbWFnZU1vZGFsTmFtZSA9XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1uYW1lXCIpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgdGhpcy5faW1hZ2VNb2RhbC5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5faW1hZ2VNb2RhbC5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VNb2RhbE5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBjYXJkRGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRTZWxlY3Rvci5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2VsZW1lbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlSWNvbik7XHJcblxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VJY29uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgY29uc3QgY2FyZE5hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2VsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJyZXNldFZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfY2xvc2VNb2RhbE9uUmVtb3RlQ2xpY2siLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJ0YXJnZXQiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dERhdGEiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJyZXNldCIsImZvcm1Db25maWd1cmF0aW9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVGb3JtIiwiYWRkQ2FyZE1vZGFsIiwiYWRkQ2FyZEZvcm0iLCJwcmV2aWV3SW1hZ2VNb2RhbCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwidXNlckluZm9Qb3B1cCIsImltYWdlUHJldmlld1BvcHVwIiwiX2ltYWdlTW9kYWwiLCJfaW1hZ2VNb2RhbE5hbWUiLCJsaW5rIiwic3JjIiwiYWx0IiwiY3JlYXRlQ2FyZCIsImNhcmRTZWxlY3RvciIsImNhcmREYXRhIiwiaGFuZGxlSW1hZ2VDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfaGFuZGxlTGlrZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlIiwidG9nZ2xlIiwiZ2VuZXJhdGVDYXJkIiwiY2FyZE5hbWUiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmQiLCJuZXdDYXJkUG9wdXAiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiY3VycmVudFVzZXJpbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==